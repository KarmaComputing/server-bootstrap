#!ipxe

# The iPXE script below is based on:
# https://boot.alpinelinux.org/boot.ipxe

#!ipxe

dhcp

set serverip 192.168.1.29:8080
set console console=tty0
set cmdline modules=loop,squashfs,sd-mod,usb-storage nomodeset
set branch v3.20
set flavor lts
set arch x86_64
set base-url http://${serverip}/iso/alpine-netboot/boot
set modloop-url ${base-url}/modloop-${flavor}
set repo-url http://dl-cdn.alpinelinux.org/alpine/${branch}/main

imgfree
kernel ${base-url}/vmlinuz-${flavor} ${cmdline} ${console} ip=dhcp alpine_repo=${repo-url} modloop=${modloop-url} alpine_dev=tmpfs
initrd ${base-url}/initramfs-${flavor}
boot
